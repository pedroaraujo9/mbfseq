% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_model_data.R
\name{create_model_data}
\alias{create_model_data}
\title{Create Data Structures for Model Building with Dual Cluster Assignments}
\usage{
create_model_data(
  time,
  id,
  x = NULL,
  z = NULL,
  w = NULL,
  G = NULL,
  M = NULL,
  n_basis = 15,
  intercept = FALSE
)
}
\arguments{
\item{time}{Numeric vector indicating the time for each observation.}

\item{id}{Vector of subject or group identifiers (length = number of observations).}

\item{x}{(Optional) Matrix or data.frame of covariates (columns = covariates, rows = observations).}

\item{z}{(Optional) Vector specifying cluster membership for each subject or observation (primary clustering).}

\item{w}{(Optional) Vector specifying cluster membership for each subject or observation in a second clustering (parallel to z).}

\item{G}{(Optional) Integer. Number of clusters in z. Required if z is not supplied.}

\item{M}{(Optional) Integer. Number of clusters in w. Required if w is not supplied.}

\item{n_basis}{Integer. Number of basis functions for representing time (default is 15).}

\item{intercept}{Logical. Whether to force an intercept column in cluster matrices (default is FALSE).}
}
\value{
A list of class "model_data" containing prepared basis expansions, cluster encodings, data frames, matrices, and auxiliary structures for downstream model processing.
}
\description{
Construct and return a list containing all necessary data structures required for model building based on time, group assignments (z), an optional second clustering (w), and optionally provided covariates and basis functions.
}
\details{
Both z and w are interpreted as cluster assignment vectors. If one is not given, you must specify the respective cluster count (G, M). The time variable is expanded with user-defined basis functions (see gen_basis_matrix). Computes auxiliary indices and structures to support penalization and clustering logic for two clusterings. Uses TraMineR for sequence distance calculations among clusters in z. All structures are sized and aligned for downstream modeling.
}
\examples{
\dontrun{
  # Example with two cluster assignments (z and w) per subject
  time <- rep(1:3, 10)
  id <- rep(1:10, each = 3)
  z <- rep(1:2, each = 15)  # primary clustering
  w <- sample(1:2, size=30, replace=TRUE)  # secondary clustering
  x <- matrix(rnorm(30), ncol = 1)
  data <- create_model_data(time = time, id = id, x = x, z = z, w = w)
  str(data)
}
}
